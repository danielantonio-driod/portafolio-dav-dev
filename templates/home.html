{% extends 'base/base.html' %}
{% load static %}

{% block title %}Daniel Arrieta | Fullstack Developer + Django{% endblock %}

{% block content %}
    <section id="inicio">
        <h2>Desarrollador Fullstack + Django</h2>
        <p>Construyendo soluciones web desde Chile para el mundo con Django.</p>
        <div class="botones">
            {% if user.is_authenticated %}
                {% if user.userprofile.can_access_dashboard %}
                    <a href="{% url 'dashboard:dashboard_home' %}" class="boton">Dashboard</a>
                {% endif %}
                <a href="{% url 'orders:order_list' %}" class="boton">Ver Ã“rdenes</a>
            {% else %}
                <a href="{% url 'register' %}" class="boton">Registrarse</a>
                <a href="{% url 'login' %}" class="boton">Iniciar SesiÃ³n</a>
            {% endif %}
            <a href="#contacto" class="boton">ContÃ¡ctame</a>
        </div>
    </section>

    <section id="sobre-mi">
        <h2>Sobre mÃ­</h2>
        <p>
            Apasionado por la tecnologÃ­a, con experiencia real en mecÃ¡nica, logÃ­stica y desarrollo. 
            Me especializo en crear soluciones Ãºtiles para negocios reales usando Django y tecnologÃ­as modernas.
        </p>
        <div class="detalle">
            <h3>ğŸš€ Nuevas Funcionalidades Django:</h3>
            <ul style="list-style: none; padding: 0; margin-top: 10px;">
                <li>âœ… Sistema completo de autenticaciÃ³n y autorizaciÃ³n</li>
                <li>âœ… Dashboard administrativo con roles y permisos</li>
                <li>âœ… GestiÃ³n de mensajes de contacto con estados</li>
                <li>âœ… Sistema de Ã³rdenes con seguimiento completo</li>
                <li>âœ… Panel de administraciÃ³n Django personalizado</li>
                <li>âœ… Base de datos SQLite con modelos relacionales</li>
            </ul>
        </div>
    </section>

    <section id="proyectos">
        <h2>Proyectos</h2>
        <div class="carrusel-controles">
            <button onclick="moverCarrusel(-1)">&#9664;</button>
            <button onclick="moverCarrusel(1)">&#9654;</button>
        </div>
        
        <div class="proyecto">
            <h3>Portfolio Django - Sistema de GestiÃ³n</h3>
            <div class="detalle">
                <p><strong>TecnologÃ­as:</strong> Django 5.2.7, SQLite, Bootstrap, JavaScript</p>
                <p><strong>Funcionalidades:</strong></p>
                <ul style="list-style: none; padding: 0;">
                    <li>ğŸ” AutenticaciÃ³n con 4 roles: Admin, Manager, Staff, Customer</li>
                    <li>ğŸ“ Formularios Django con validaciÃ³n completa</li>
                    <li>ğŸ“Š Dashboard con estadÃ­sticas en tiempo real</li>
                    <li>ğŸ“‹ GestiÃ³n de Ã³rdenes con estados y asignaciones</li>
                    <li>ğŸ’¬ Sistema de mensajes con prioridades</li>
                    <li>âš™ï¸ Panel admin personalizado</li>
                </ul>
                <div style="margin-top: 15px;">
                    {% if user.is_authenticated %}
                        <a href="{% url 'dashboard:dashboard_home' %}" class="btn-django btn-primary">Ver Dashboard</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn-django btn-primary">Acceder al Sistema</a>
                    {% endif %}
                    <a href="/admin/" class="btn-django btn-warning">Panel Admin</a>
                </div>
            </div>
        </div>
        
        <div class="proyecto">
            <h3>Informativo_Cyberguard</h3>
            <div class="detalle">
                <p><strong>DescripciÃ³n:</strong> PÃ¡gina informativa de ciberseguridad.</p>
                <p><strong>TecnologÃ­as:</strong> HTML5, CSS3, JavaScript</p>
                <a href="https://github.com/danielantonio-driod/m-dulo_2/tree/master/cyberguard" class="btn-django">Ver en GitHub</a>
            </div>
        </div>
        
        <div class="proyecto">
            <h3>Sistema de Contacto Django</h3>
            <div class="detalle">
                <p><strong>CaracterÃ­sticas:</strong></p>
                <ul style="list-style: none; padding: 0;">
                    <li>ğŸ“§ Formulario con validaciÃ³n en tiempo real</li>
                    <li>ğŸ·ï¸ Sistema de prioridades (Baja, Media, Alta, Urgente)</li>
                    <li>ğŸ“ˆ Estados de seguimiento (Nuevo, En Proceso, Resuelto)</li>
                    <li>ğŸ” Filtros y bÃºsqueda avanzada</li>
                    <li>ğŸ“± DiseÃ±o responsivo</li>
                </ul>
                <a href="{% url 'contact:contact_form' %}" class="btn-django btn-success">Probar Formulario</a>
                {% if user.is_authenticated and user.userprofile.can_manage_messages %}
                    <a href="{% url 'contact:message_list' %}" class="btn-django">Gestionar Mensajes</a>
                {% endif %}
            </div>
        </div>
        
        <div class="proyecto">
            <h3>Sistema de Usuarios y Roles</h3>
            <div class="detalle">
                <p><strong>Funcionalidades:</strong></p>
                <ul style="list-style: none; padding: 0;">
                    <li>ğŸ‘¤ Perfiles de usuario extendidos</li>
                    <li>ğŸ›¡ï¸ Control de acceso basado en roles</li>
                    <li>ğŸ“ Registro de actividades del sistema</li>
                    <li>âš™ï¸ GestiÃ³n de permisos granular</li>
                </ul>
                <p><strong>Usuarios Demo:</strong></p>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 8px;">
                    <div>Admin: admin/admin123</div>
                    <div>Manager: manager/manager123</div>
                    <div>Staff: staff/staff123</div>
                    <div>Cliente: cliente/cliente123</div>
                </div>
            </div>
        </div>
        
        <div class="proyecto">
            <h3>PrÃ³ximos Proyectos</h3>
            <div class="detalle">
                <p><strong>En desarrollo:</strong></p>
                <ul style="list-style: none; padding: 0;">
                    <li>ğŸ”„ API REST con Django REST Framework</li>
                    <li>ğŸ“Š Dashboard con grÃ¡ficos dinÃ¡micos</li>
                    <li>ğŸ”” Sistema de notificaciones en tiempo real</li>
                    <li>ğŸ“± App mÃ³vil con React Native</li>
                    <li>â˜ï¸ Despliegue en la nube (AWS/Heroku)</li>
                </ul>
                <button class="btn-django" disabled>PrÃ³ximamente</button>
            </div>
        </div>
    </section>

    <section id="contacto">
        <h2>Contacto Django</h2>
        <div class="detalle" style="margin-bottom: 20px;">
            <p><strong>ğŸš€ Nuevo:</strong> Este formulario ahora usa el sistema Django con validaciÃ³n completa, 
            almacenamiento en base de datos y gestiÃ³n administrativa.</p>
        </div>
        
        <form method="post" action="{% url 'contact:contact_form' %}">
            {% csrf_token %}
            <input type="text" name="name" placeholder="Tu nombre completo" required />
            <input type="email" name="email" placeholder="Tu correo electrÃ³nico" required />
            <input type="tel" name="phone" placeholder="Tu telÃ©fono (opcional)" />
            <input type="text" name="subject" placeholder="Asunto del mensaje" required />
            
            <select name="priority" style="font-family: 'Press Start 2P', cursive; padding: 10px; border: 2px solid #000; font-size: 10px;">
                <option value="medium">Prioridad Media</option>
                <option value="low">Prioridad Baja</option>
                <option value="high">Prioridad Alta</option>
                <option value="urgent">Urgente</option>
            </select>
            
            <textarea name="message" placeholder="Tu mensaje (mÃ­nimo 10 caracteres)" required></textarea>
            
            <button type="submit">Enviar Mensaje Django</button>
        </form>
        
        {% if user.is_authenticated and user.userprofile.can_manage_messages %}
            <div style="margin-top: 20px; text-align: center;">
                <a href="{% url 'contact:message_list' %}" class="btn-django btn-primary">
                    Ver Todos los Mensajes (Admin)
                </a>
            </div>
        {% endif %}
    </section>

    <!-- Modal para proyectos -->
    <div id="modal" class="oculto modal">
        <div class="modal-contenido">
            <span class="cerrar" onclick="cerrarModal()">&times;</span>
            <h3 id="modal-titulo"></h3>
            <div id="modal-imagenes" class="galeria"></div>
            <p id="modal-descripcion"></p>
            <a id="modal-github" href="#" target="_blank" class="boton-github">Ver en GitHub</a>
        </div>
    </div>

    <!-- Botones flotantes -->
    <button id="btn-ir-arriba" onclick="scrollToTop()">â†‘</button>
    
    {% if not user.is_authenticated %}
        <a href="{% url 'login' %}" id="btn-contacto">Entrar</a>
    {% else %}
        <a href="{% url 'logout' %}" id="btn-contacto">Salir</a>
    {% endif %}
{% endblock %}

{% block extra_js %}
<script>
// Actualizar datos de proyectos para incluir informaciÃ³n de Django
const proyectosData = [
    {
        titulo: 'Portfolio Django - Sistema Completo',
        descripcion: 'Sistema de gestiÃ³n completo desarrollado con Django 5.2.7. Incluye autenticaciÃ³n, dashboard administrativo, gestiÃ³n de mensajes y Ã³rdenes.',
        imagenes: [
            '{% static "img/django-dashboard.png" %}',
            '{% static "img/django-forms.png" %}',
            '{% static "img/django-admin.png" %}'
        ],
        repo: 'https://github.com/danielantonio-driod/portafolio-dav-dev'
    },
    {
        titulo: 'Informativo_Cyberguard',
        descripcion: 'PÃ¡gina informativa de ciberseguridad desarrollada con tecnologÃ­as web estÃ¡ndar.',
        imagenes: [
            '{% static "img/cg1.jpg" %}',
            '{% static "img/cg2.jpg" %}',
            '{% static "img/cg3.jpg" %}'
        ],
        repo: 'https://github.com/danielantonio-driod/m-dulo_2/tree/master/cyberguard'
    },
    {
        titulo: 'Sistema de Contacto Django',
        descripcion: 'Formulario de contacto completo con validaciÃ³n, almacenamiento en BD y gestiÃ³n administrativa.',
        imagenes: [],
        repo: '#'
    },
    {
        titulo: 'Sistema de Usuarios y Roles',
        descripcion: 'Sistema completo de autenticaciÃ³n con 4 roles diferentes y control de acceso granular.',
        imagenes: [],
        repo: '#'
    },
    {
        titulo: 'PrÃ³ximos Proyectos Django',
        descripcion: 'API REST, notificaciones en tiempo real, dashboard con grÃ¡ficos y mÃ¡s funcionalidades.',
        imagenes: [],
        repo: '#'
    }
];

// Funcionalidad para mostrar mensajes de Django
{% if messages %}
    document.addEventListener('DOMContentLoaded', function() {
        {% for message in messages %}
            // Mostrar mensaje usando el estilo del portfolio
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-{{ message.tags }}';
            alertDiv.innerHTML = '{{ message|escapejs }}';
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '100px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '999';
            alertDiv.style.maxWidth = '300px';
            
            document.body.appendChild(alertDiv);
            
            // Auto-remove despuÃ©s de 5 segundos
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        {% endfor %}
    });
{% endif %}
</script>
{% endblock %}